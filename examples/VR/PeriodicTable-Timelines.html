<!DOCTYPE html>
<html>
    <head>
        <title>three.js css3d - periodic table</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <link type="text/css" rel="stylesheet" href="main.css">
        <style>
            a {
                color: rgb(255, 193, 136);
            }

            #menu {
                position: absolute;
                bottom: 0px;
                width: 100%;
                text-align: center;
            }

            .element {
                width: 80px;
                height: 90px;
                box-shadow: 0px 0px 12px rgba(0,255,255,0.5);
                border: 1px solid rgba(127,255,255,0.25);
                font-family: Helvetica, sans-serif;
                text-align: center;
                line-height: normal;
                cursor: default;
            }
           
            .element0 {
                width: 80px;
                height: 90px;
                box-shadow: 0px 0px 12px rgba(0, 247, 255, 0.5);
                border: 1px solid rgba(127,255,255,0.25);
                font-family: Helvetica, sans-serif;
                text-align: center;
                line-height: normal;
                cursor: default;
            }

            .elements1 {
                width: 80px;
                height: 90px;
                box-shadow: 0px 0px 12px rgba(145, 255, 0, 0.5);
                border: 2px solid rgba(127,255,255,0.25);
                font-family: Helvetica, sans-serif;
                text-align: center;
                line-height: normal;
                cursor: default;
            }
            .element2 {
                width: 80px;
                height: 90px;
                box-shadow: 0px 0px 12px rgba(0, 119, 255, 0.5);
                border: 1px solid rgba(127,255,255,0.25);
                font-family: Helvetica, sans-serif;
                text-align: center;
                line-height: normal;
                cursor: default;
            }

            .element:hover {
                box-shadow: 0px 0px 12px rgba(0,255,255,0.75);
                border: 1px solid rgba(127,255,255,0.75);
            }
            .element0:hover {
                box-shadow: 0px 0px 12px rgba(0,255,255,0.75);
                border: 1px solid rgba(127,255,255,0.75);
            }

            .element1:hover {
                box-shadow: 0px 0px 12px rgba(0,255,255,0.75);
                border: 1px solid rgba(127,255,255,0.75);
            }

            .element2:hover {
                box-shadow: 0px 0px 12px rgba(0,255,255,0.75);
                border: 1px solid rgba(127,255,255,0.75);
            }

           


                .element .number {
                    position: absolute;
                    top: 20px;
                    right: 20px;
                    font-size: 8px;
                    color: rgba(127,255,255,0.75);
                }

                .element .symbol {
                    position: absolute;
                    top: 40px;
                    left: 0px;
                    right: 0px;
                    font-size: 60px;
                    font-weight: bold;
                    color: rgba(255,255,255,0.75);
                    text-shadow: 0 0 7px rgba(0,255,255,0.95);
                }

                .element .details {
                    position: absolute;
                    bottom: 15px;
                    left: 0px;
                    right: 0px;
                    font-size: 8px;
                    color: rgba(127,255,255,0.75);
                }

            button {
                color: rgba(127,255,255,0.75);
                background: transparent;
                outline: 1px solid rgba(127,255,255,0.75);
                border: 0px;
                padding: 5px 10px;
                cursor: pointer;
            }

            button:hover {
                background-color: rgba(9, 255, 0, 0.5);
            }

            button:active {
                color: #000000;
                background-color: rgba(0,255,255,0.75);
            }
        </style>
    </head>
    <body>

        <div id="info"><a href="https://threejs.org" target="_blank" rel="noopener">three.js</a> css3d - periodic table.</div>
        <div id="container"></div>
        <div id="menu">
            <button id="table">TABLE</button>
            <button id="sphere">SPHERE</button>
            <button id="helix">HELIX</button>
            <button id="grid">GRID</button>
        </div>

        <script type="importmap">
            {
                "imports": {
                    "three": "../build/three.module.js",
                    "three/addons/": "./jsm/"
                }
            }
        </script>

        <script type="module">

            import * as THREE from 'three';

            import TWEEN from 'three/addons/libs/tween.module.js';
            import { TrackballControls } from 'three/addons/controls/TrackballControls.js';
            import { CSS3DRenderer, CSS3DObject } from 'three/addons/renderers/CSS3DRenderer.js';
 
 
            import { BoxLineGeometry } from 'three/addons/geometries/BoxLineGeometry.js';
            import { XRButton } from 'three/addons/webxr/XRButton.js';
            import { XRControllerModelFactory } from 'three/addons/webxr/XRControllerModelFactory.js';
 
import { VRButton } from 'three/addons/webxr/VRButton.js';

            const clock = new THREE.Clock();

            let container;
            let camera, scene, raycaster, renderer;

            let room;

            let controller, controllerGrip, controls;
            let INTERSECTED;
             
const yearsCircleObjects = [];
            const yearsCircleTargets = { table: [], sphere: [], helix: [], grid: [] };
            init();
            animate();

            function init() {

                //camera = new THREE.PerspectiveCamera( 40, window.innerWidth / window.innerHeight, 1, 10000 );
                //camera.position.z = 3000;

                //scene = new THREE.Scene();

                container = document.createElement( 'div' );
                document.body.appendChild( container );

                scene = new THREE.Scene();
                scene.background = new THREE.Color( 0x505050 );

               
                camera = new THREE.PerspectiveCamera( 40, window.innerWidth / window.innerHeight, 1, 10000 );
                camera.position.z = 3000;
                scene.add( camera );

                room = new THREE.LineSegments(
                    new BoxLineGeometry( 600, 600, 600, 10000, 10000, 10000 ).translate( 0, 3, 0 ),
                    new THREE.LineBasicMaterial( { color: 0xbcbcbc } )
                );
                scene.add( room );

                scene.add( new THREE.HemisphereLight( 0xa5a5a5, 0x898989, 3 ) );

                const light = new THREE.DirectionalLight( 0xffffff, 3 );
                light.position.set( 1, 1, 1 ).normalize();
                scene.add( light );

                const geometry = new THREE.BoxGeometry( 0.15, 0.15, 0.15 );
const vector = new THREE.Vector3();
                // table
   // --- Add after grid layout in init() ---

   /*
            const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
            const startYear = 1970;
            const yearsCount = 100;
            const vector = new THREE.Vector3();
           

            for (let year = startYear; year < (yearsCount + startYear); year++) {
                for (let m = 0; m < 12; m++) {
                    const element = document.createElement('div');
                    console.warn("year: " + year + " month: " + months[m]);
                    if (year < 1981 ) {
                        element.className = 'element0';
                        element.style.backgroundColor = 'rgba(56,55,127,' + (Math.random() * 0.5 + 0.25) + ')';
                    } else if (year >= 1981 && year < 2025) {
                        element.className = 'element1';
                        element.style.backgroundColor = 'rgba(220,3,90,' + (Math.random() * 0.1 + 0.25) + ')';
                    } else if (year >= 2025 && year < 2041 ) {
                        element.className = 'element2';
                        element.style.backgroundColor = 'rgba(0,127,127,' + (Math.random() * 0.1 + 0.25) + ')';
                    }   else if (year >= 2041 && year < 2061 ) {
                        element.className = 'element2';
                        element.style.backgroundColor = 'rgba(127,127,0,' + (Math.random() * 0.1 + 0.25) + ')';
                    }  
                    else {
                        element.className = 'element1';
                        element.style.backgroundColor = 'rgba(127,127,127,' + (Math.random() * 0.5 + 0.25) + ')';
                    }
             
                   

                    const number = document.createElement('div');
                    number.className = 'number';
                    number.textContent = year + 1;
                    element.appendChild(number);

                    const symbol = document.createElement('div');
                    symbol.className = 'symbol';
                    symbol.textContent = months[m];
                    element.appendChild(symbol);

                    const details = document.createElement('div');
                    details.className = 'details';
                    details.innerHTML = `Year: ${year + 1}<br>Month: ${months[m]}`;
                    element.appendChild(details);

                    const objectCSS = new CSS3DObject(element);
                    objectCSS.position.x = Math.random() * 4000 - 2000;
                    objectCSS.position.y = Math.random() * 4000 - 2000;
                    objectCSS.position.z = Math.random() * 4000 - 2000;
                    scene.add( objectCSS );

                     

                    yearsCircleObjects.push(objectCSS);

                    // Position months in a circle for each year, and years in a larger circle
                    const angleYear = (year / yearsCount) * Math.PI * 2;
                    const angleMonth = (m / 12) * Math.PI * 2;
                    const radiusYear = 1800;
                    const radiusMonth = 350;

                    const object = new THREE.Object3D();
                    object.position.x = Math.cos(angleYear) * radiusYear + Math.cos(angleMonth) * radiusMonth;
                    object.position.y = Math.sin(angleYear) * radiusYear + Math.sin(angleMonth) * radiusMonth;
                    object.position.z = Math.sin(angleMonth) * radiusMonth;

                    const uniqueId = (year * 12) - m;
 
                    vector.copy( object.position ).multiplyScalar( 2 );

                    object.lookAt(new THREE.Vector3(0, 0, 0));
                    yearsCircleTargets.table.push(object);
                }
            }
*/

// In your init() function, replace the selected code with:
createYearsCircle(yearsCircleObjects, yearsCircleTargets, vector);

                // sphere
 

                for ( let i = 0, l = yearsCircleObjects.length; i < l; i ++ ) {

                    const phi = Math.acos( - 1 + ( 2 * i ) / l );
                    const theta = Math.sqrt( l * Math.PI ) * phi;

                    const object = new THREE.Object3D();

                    object.position.setFromSphericalCoords( 800, phi, theta );

                    vector.copy( object.position ).multiplyScalar( 2 );

                    object.lookAt( vector );

                    yearsCircleTargets.sphere.push( object );

                }

                // helix

                for ( let i = 0, l = yearsCircleObjects.length; i < l; i ++ ) {

                    const theta = i * 0.175 + Math.PI;
                    const y = - ( i * 4 ) + 250;

                    const object = new THREE.Object3D();

                    object.position.setFromCylindricalCoords( 600, theta, y );

                    vector.x = object.position.x * 2;
                    vector.y = object.position.y;
                    vector.z = object.position.z * 2;

                    object.lookAt( vector );

                    yearsCircleTargets.helix.push( object );

                }

                // grid

                for ( let i = 0; i < yearsCircleObjects.length; i ++ ) {

                    const object = new THREE.Object3D();

                    object.position.x = ( ( i % 5 ) * 400 ) - 800;
                    object.position.y = ( - ( Math.floor( i / 5 ) % 5 ) * 400 ) + 800;
                    object.position.z = ( Math.floor( i / 25 ) ) * 1000 - 2000;

                    yearsCircleTargets.grid.push( object );

                }


        //  targets.yearsCircle = yearsCircleTargets;

            // --- Add button to menu after grid button ---
            const buttonYearsCircle = document.createElement('button');
            buttonYearsCircle.id = 'yearsCircle';
            buttonYearsCircle.textContent = '100 YEARS CIRCLE';
            document.getElementById('menu').appendChild(buttonYearsCircle);

            //buttonYearsCircle.addEventListener('click', function () {
            //  transform(targets.yearsCircle, 2000, yearsCircleObjects);
        //  });
                //

                renderer = new CSS3DRenderer();
                renderer.setSize( window.innerWidth, window.innerHeight );
                document.getElementById( 'container' ).appendChild( renderer.domElement );

                //

                controls = new TrackballControls( camera, renderer.domElement );
                controls.minDistance = 500;
                controls.maxDistance = 6000;
                controls.addEventListener( 'change', render );

                const buttonTable = document.getElementById( 'table' );
                buttonTable.addEventListener( 'click', function () {

                    transform( yearsCircleTargets.table, 2000 );

                } );

                const buttonSphere = document.getElementById( 'sphere' );
                buttonSphere.addEventListener( 'click', function () {

                    transform( yearsCircleTargets.sphere, 2000 );

                } );

                const buttonHelix = document.getElementById( 'helix' );
                buttonHelix.addEventListener( 'click', function () {

                    transform( yearsCircleTargets.helix, 2000 );

                } );

                const buttonGrid = document.getElementById( 'grid' );
                buttonGrid.addEventListener( 'click', function () {

                    transform( yearsCircleTargets.grid, 2000 );

                } );

                transform( yearsCircleTargets.table, 2000 );

                //

                window.addEventListener( 'resize', onWindowResize );

            //  document.body.appendChild( VRButton.createButton( renderer ) );
            }
function createYearsCircle(yearsCircleObjects, yearsCircleTargets,vector) {
    const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
    const startYear = 1970;
    const yearsCount = 100;
   

    for (let year = startYear; year < (yearsCount + startYear); year++) {
        for (let m = 0; m < 12; m++) {
            const element = document.createElement('div');
            console.log(year );
            if (year < 1981 ) {
                element.className = 'element0';
                element.style.backgroundColor = 'rgba(56,55,127,' + (Math.random() * 0.5 + 0.25) + ')';
            } else if (year >= 1981 && year <= 2025) {
                element.className = 'element2';
                element.style.backgroundColor = 'rgba(255, 99, 71, 0.8,' + (Math.random() * 0.7 + 0.25) + ')';
            } else if (year > 2025 && year < 2041 ) {
                element.className = 'element0';
                element.style.backgroundColor = 'rgba(60, 179, 113,' + (Math.random() * 0.8 + 0.25) + ')';
            }   else if (year >= 2041 && year < 2061 ) {
                element.className = 'element2';
                element.style.backgroundColor = 'rgba(127,127,0,' + (Math.random() * 0.7 + 0.25) + ')';
            }  
            else {
                element.className = 'element0';
                element.style.backgroundColor = 'rgba(56,55,127,' + (Math.random() * 0.5 + 0.25) + ')';
            }

            const number = document.createElement('div');
            number.className = 'number';
            number.textContent = year ;
            element.appendChild(number);

            const symbol = document.createElement('div');
            symbol.className = 'symbol';
            symbol.textContent = months[m];
            element.appendChild(symbol);

            const details = document.createElement('div');
            details.className = 'details';
            details.innerHTML = `Year: ${year}<br>Month: ${months[m]}`;
            element.appendChild(details);

            const objectCSS = new CSS3DObject(element);
            objectCSS.position.x = Math.random() * 4000 - 2000;
            objectCSS.position.y = Math.random() * 4000 - 2000;
            objectCSS.position.z = Math.random() * 4000 - 2000;
            scene.add( objectCSS );

            yearsCircleObjects.push(objectCSS);

            const angleYear = ((Math.abs(year-startYear)) / yearsCount) * Math.PI * 2;
            const angleMonth = (m / 12) * Math.PI * 2;
            const radiusYear = 1800;
            const radiusMonth = 350;

            const object = new THREE.Object3D();
            object.position.x = Math.cos(angleYear) * radiusYear + Math.cos(angleMonth) * radiusMonth;
            object.position.y = Math.sin(angleYear) * radiusYear + Math.sin(angleMonth) * radiusMonth;
            object.position.z = Math.sin(angleMonth) * radiusMonth;

            vector.copy( object.position ).multiplyScalar( 2 );

            object.lookAt(new THREE.Vector3(0, 0, 0));
            yearsCircleTargets.table.push(object);
        }
    }
}
       

function transform( targets, duration ) {

                TWEEN.removeAll();

                for ( let i = 0; i < yearsCircleObjects.length; i ++ ) {

                    const object = yearsCircleObjects[ i ];
                    const target = targets[ i ];

                    new TWEEN.Tween( object.position )
                        .to( { x: target.position.x, y: target.position.y, z: target.position.z }, Math.random() * duration + duration )
                        .easing( TWEEN.Easing.Exponential.InOut )
                        .start();

                    new TWEEN.Tween( object.rotation )
                        .to( { x: target.rotation.x, y: target.rotation.y, z: target.rotation.z }, Math.random() * duration + duration )
                        .easing( TWEEN.Easing.Exponential.InOut )
                        .start();

                }

                new TWEEN.Tween( this )
                    .to( {}, duration * 2 )
                    .onUpdate( render )
                    .start();

            }

            function onWindowResize() {

                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();

                renderer.setSize( window.innerWidth, window.innerHeight );

                render();

            }

            function animate() {

                requestAnimationFrame( animate );

                TWEEN.update();

                controls.update();

            }

            function render() {

                renderer.render( scene, camera );

            }

        </script>
    </body>
</html>

